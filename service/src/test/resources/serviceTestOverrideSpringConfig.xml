<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"

       xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd">

    <beans profile="xmlTest">
        <bean id="xStream" class="com.thoughtworks.xstream.XStream">
            <constructor-arg ref="xmlDriver"/>
        </bean>

        <bean id="xmlDriver" class="com.thoughtworks.xstream.io.xml.Dom4JDriver"/>

        <bean class="com.getjavajob.training.yarginy.socialnetwork.service.xml.AccountInfoXmlServiceImpl"/>
    </beans>

    <beans profile="accountServiceTest">
        <bean id="accountDaoFacade" class="org.mockito.Mockito" factory-method="mock">
            <constructor-arg value="com.getjavajob.training.yarginy.socialnetwork.dao.facades.AccountDaoFacadeImpl"/>
        </bean>
        <bean id="friendshipsDaoFacade" class="org.mockito.Mockito" factory-method="mock">
            <constructor-arg value="com.getjavajob.training.yarginy.socialnetwork.dao.facades.FriendshipsDaoFacadeImpl"/>
        </bean>
        <bean id="phoneDaoFacade" class="org.mockito.Mockito" factory-method="mock">
            <constructor-arg value="com.getjavajob.training.yarginy.socialnetwork.dao.facades.PhoneDaoFacadeImpl"/>
        </bean>
        <bean id="dialogDaoFacade" class="org.mockito.Mockito" factory-method="mock">
            <constructor-arg value="com.getjavajob.training.yarginy.socialnetwork.dao.facades.DialogDaoFacadeImpl"/>
        </bean>
        <bean id="accountServiceTransactional" class="org.mockito.Mockito" factory-method="mock">
            <constructor-arg value="com.getjavajob.training.yarginy.socialnetwork.service.AccountServiceTransactional"/>
        </bean>
        <bean id="transactionPerformer"
              class="com.getjavajob.training.yarginy.socialnetwork.common.utils.TransactionPerformer"/>
        <bean class="com.getjavajob.training.yarginy.socialnetwork.service.AccountServiceImpl">
            <constructor-arg ref="accountDaoFacade"/>
            <constructor-arg ref="phoneDaoFacade"/>
            <constructor-arg ref="friendshipsDaoFacade"/>
            <constructor-arg ref="dialogDaoFacade"/>
            <constructor-arg ref="transactionPerformer"/>
            <constructor-arg ref="accountServiceTransactional"/>
        </bean>
    </beans>

    <beans profile="groupServiceTest">
        <bean id="groupDaoFacade" class="org.mockito.Mockito" factory-method="mock">
            <constructor-arg value="com.getjavajob.training.yarginy.socialnetwork.dao.facades.GroupDaoFacadeImpl"/>
        </bean>
        <bean id="groupsModeratorsDaoFacade" class="org.mockito.Mockito" factory-method="mock">
            <constructor-arg value="com.getjavajob.training.yarginy.socialnetwork.dao.facades.GroupsModeratorsDaoFacade"/>
        </bean>
        <bean id="groupsMembersDaoFacade" class="org.mockito.Mockito" factory-method="mock">
            <constructor-arg value="com.getjavajob.training.yarginy.socialnetwork.dao.facades.GroupsMembersDaoFacade"/>
        </bean>
        <bean id="groupServiceTransactional" class="com.getjavajob.training.yarginy.socialnetwork.service.GroupServiceTransactional">
            <constructor-arg ref="groupDaoFacade"/>
            <constructor-arg ref="groupsModeratorsDaoFacade"/>
        </bean>
        <bean id="transactionPerformer"
              class="com.getjavajob.training.yarginy.socialnetwork.common.utils.TransactionPerformer"/>
        <bean class="com.getjavajob.training.yarginy.socialnetwork.service.GroupServiceImpl">
            <constructor-arg ref="groupDaoFacade"/>
            <constructor-arg ref="groupsMembersDaoFacade"/>
            <constructor-arg ref="groupsModeratorsDaoFacade"/>
            <constructor-arg ref="transactionPerformer"/>
            <constructor-arg ref="groupServiceTransactional"/>
        </bean>
    </beans>
</beans>